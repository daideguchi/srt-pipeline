# 🎬 SRTFile UI - 字幕生成システム ウェブインターフェース

V9字幕生成エンジンをベースとした直感的なウェブUI

## 🚀 起動方法

```bash
# Streamlitアプリケーション起動
streamlit run app.py

# または指定ポートで起動
streamlit run app.py --server.port 8501
```

## 📍 アクセス情報

- **URL**: http://localhost:8501
- **対応ブラウザ**: Chrome, Firefox, Safari, Edge

## ✨ 主な機能

### 📁 ファイル管理
- **音声ファイルアップロード**: WAV, M4A, MP3, FLAC対応
- **台本テキストアップロード**: UTF-8エンコード対応
- **ドラッグ&ドロップ**: 直感的なファイル選択

### ⚙️ 字幕生成
- **V9エンジン統合**: 最新の高精度字幕生成アルゴリズム
- **WhisperX活用**: 精密な音声認識とタイミング調整
- **リアルタイム処理**: 89セグメント処理の進捗表示

### 📊 監視・ログ
- **リアルタイムログ**: 処理状況の詳細表示
- **プログレスバー**: 視覚的な進捗確認
- **エラーハンドリング**: 詳細なエラー情報表示

### 📥 結果取得
- **SRT形式**: 標準字幕形式でダウンロード
- **VTT形式**: ウェブ対応字幕形式でダウンロード
- **プレビュー機能**: 生成結果の即座確認

## 🖥️ ユーザーインターフェース

### サイドバー (左側)
- ファイルアップロード
- ファイル情報表示
- 台本プレビュー

### メインエリア (中央)
- 処理コントロール
- プログレス表示
- ログ表示
- 結果プレビュー

### システム情報 (右側)
- Python環境情報
- エンジン状況
- 現在時刻

## 🔧 技術仕様

### フロントエンド
- **Streamlit**: Python ウェブフレームワーク
- **カスタムCSS**: 直感的なデザイン
- **レスポンシブ**: 複数画面サイズ対応

### バックエンド
- **V9エンジン**: `scripts/whisperx_subtitle_generator.py`
- **UIエンジン**: `ui_engine.py` (統合ラッパー)
- **非同期処理**: リアルタイムログ更新

### データフロー
```
音声ファイル + 台本ファイル
           ↓
    UI統合エンジン
           ↓
     V9字幕生成エンジン
           ↓
    WhisperX精密処理
           ↓
    SRT/VTT字幕ファイル
```

## 📋 使用手順

### 1. ファイル準備
- 音声ファイル (WAV推奨, 24kHz以上)
- 台本テキスト (UTF-8, 改行区切り)

### 2. アップロード
- サイドバーから両ファイルを選択
- ファイル情報が自動表示される

### 3. 処理実行
- 「字幕生成開始」ボタンクリック
- リアルタイムログを確認

### 4. 結果取得
- 処理完了後、ダウンロードボタンが有効化
- SRT/VTTの両形式でダウンロード可能

## 🧪 テスト方法

### サンプルファイルでテスト
```bash
# 既存のテストファイルを使用
# 音声: audio/4_2.wav (24.8MB, 517秒)
# 台本: script_4_2.txt (10,860文字)
```

### 処理時間目安
- **音声解析**: 約30-60秒
- **WhisperX処理**: 約60-120秒
- **字幕最適化**: 約30秒
- **総処理時間**: 2-4分程度

## ⚠️ 注意事項

### ファイル制限
- **音声ファイル**: 最大500MB
- **台本ファイル**: 最大50,000文字
- **同時実行**: 1プロセスのみ

### 対応環境
- **Python**: 3.12以上
- **メモリ**: 8GB以上推奨
- **ディスク容量**: 2GB以上の空き容量

### トラブルシューティング
- ログ表示でエラー詳細を確認
- ファイル形式・エンコードを確認
- ブラウザキャッシュをクリア

## 📈 パフォーマンス最適化

### 推奨設定
- **音声形式**: WAV (無圧縮)
- **サンプルレート**: 44.1kHz以上
- **台本形式**: シンプルなテキスト

### 品質向上
- 明瞭な音声ファイル使用
- 正確な台本テキスト提供
- 適切な文章区切り

## 🔗 関連ファイル

- `app.py` - メインUIアプリケーション
- `ui_engine.py` - V9エンジン統合ラッパー
- `scripts/whisperx_subtitle_generator.py` - V9字幕生成エンジン
- `subs/final_complete.*` - 最新の生成結果

## 📊 システム要件

- **OS**: macOS, Linux, Windows
- **Python**: 3.12.8+
- **依存関係**: requirements.txt参照
- **外部ツール**: WhisperX, FFmpeg

---

**🎯 目標**: 誰でも簡単に高品質な日本語字幕を生成できるシステム**