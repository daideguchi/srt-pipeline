# SRTå­—å¹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ  - å®Ÿé‹ç”¨ã‚¬ã‚¤ãƒ‰

## ğŸ¯ æ¦‚è¦

**éŸ³å£°ï¼ˆAIéŸ³å£°ï¼‰+ å°æœ¬ï¼ˆAIç”Ÿæˆï¼‰** ã‹ã‚‰ **Â±50msä»¥å†…åŒæœŸã®SRT/VTTå­—å¹•** ã‚’ä¸€ç™ºç”Ÿæˆ

**å¯¾å¿œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: CapCut / Vrew / YouTube å³ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯¾å¿œ

## ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ 

```
srtfile/
â”œâ”€â”€ venv/                    # Pythonä»®æƒ³ç’°å¢ƒï¼ˆåˆå›ã®ã¿ï¼‰
â”œâ”€â”€ scripts/                 # è£œåŠ©ã‚¹ã‚¯ãƒªãƒ—ãƒˆç¾¤
â”‚   â”œâ”€â”€ force_align_whisper.py
â”‚   â”œâ”€â”€ pad_to_audio_end.py
â”‚   â”œâ”€â”€ clean_tail.py
â”‚   â”œâ”€â”€ check_durations.py
â”‚   â””â”€â”€ compare_srt_vs_script.py
â”œâ”€â”€ audio/                   # ã‚ãªãŸãŒéŸ³å£°ã‚’ç½®ãå ´æ‰€
â”œâ”€â”€ subs/                    # ç”Ÿæˆå­—å¹•ã®å‡ºåŠ›å…ˆ
â”œâ”€â”€ reports/                 # å“è³ªãƒ¬ãƒãƒ¼ãƒˆ
â”œâ”€â”€ generate_episode.py      # ğŸŒŸãƒ¡ã‚¤ãƒ³å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ srt_to_vtt.py           # SRTâ†’VTTå¤‰æ›
â”œâ”€â”€ CLAUDE_CODE_TEMPLATE.md  # Claude Codeç”¨æŒ‡ç¤º
â””â”€â”€ TROUBLESHOOTING.md       # ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œ
```

## âš¡ åŸºæœ¬é‹ç”¨ãƒ•ãƒ­ãƒ¼

### ã‚ãªãŸãŒã‚„ã‚‹ã“ã¨ï¼ˆæ¯å›ï¼‰

1. **éŸ³å£°é…ç½®**: `audio/2025-08-09_dementia_tips.wav`
2. **å°æœ¬é…ç½®**: `script_2025-08-09.txt`
3. **Claude Codeã«æŒ‡ç¤º**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨

### Claude CodeãŒã‚„ã‚‹ã“ã¨ï¼ˆè‡ªå‹•ï¼‰

1. **Whisperå¼·åˆ¶ã‚¢ãƒ©ã‚¤ãƒ³**: éŸ³å£°â†’SRTç”Ÿæˆ
2. **æœ«å°¾ã‚¯ãƒ©ãƒ³ãƒ—**: éŸ³å£°é•·-20msã§ç²¾å¯†åŒæœŸ
3. **VTTå¤‰æ›**: YouTube/CapCutç”¨å½¢å¼ç”Ÿæˆ
4. **å“è³ªæ¤œè¨¼**: Â±50msä»¥å†…ç¢ºèª
5. **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ**: å°æœ¬ä¸€è‡´åº¦åˆ†æ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆä¸€åº¦ã ã‘ï¼‰

```bash
cd srtfile
python3 -m venv venv
source venv/bin/activate
pip install -r env/requirements.txt
```

### æ¯å›ã®å­—å¹•ç”Ÿæˆ

#### ãƒ‘ã‚¿ãƒ¼ãƒ³1: Claude Codeã‚’ä½¿ã†å ´åˆï¼ˆæ¨å¥¨ï¼‰

`CLAUDE_CODE_TEMPLATE.md` ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ—¥ä»˜éƒ¨åˆ†ã‚’å¤‰æ›´

```
ã€ã‚¿ã‚¹ã‚¯ã€‘å­—å¹•ç”Ÿæˆ - éŸ³å£°+å°æœ¬ã‹ã‚‰SRT/VTTä¸€æ‹¬ç”Ÿæˆ

â–  å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
python3 generate_episode.py \
  --audio audio/2025-08-09_dementia_tips.wav \
  --script script_2025-08-09.txt \
  --model large-v3 --device auto
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ç›´æ¥å®Ÿè¡Œã™ã‚‹å ´åˆ

```bash
source venv/bin/activate

python3 generate_episode.py \
  --audio audio/2025-08-09_dementia_tips.wav \
  --script script_2025-08-09.txt \
  --model large-v3 --device auto
```

## ğŸ“¤ æˆæœç‰©

### ãƒ¡ã‚¤ãƒ³ç´å“ç‰©
- `subs/2025-08-09_final.srt` - **CapCut/Vrewç”¨**
- `subs/2025-08-09_final.vtt` - **YouTubeç”¨**

### å“è³ªãƒ¬ãƒãƒ¼ãƒˆ
- `reports/2025-08-09_full.csv` - å…¨å­—å¹•ã®å°æœ¬ä¸€è‡´åº¦
- `reports/2025-08-09_worst20.csv` - è¦æ³¨æ„ç®‡æ‰€

### æ¤œè¨¼çµæœä¾‹
```
âœ… VERIFY audio=517.331s  srt_end=517.311s  diff(audio - srt)=0.020s
ğŸ”¢ å­—å¹•æ•°: 159
âœ… CapCut/Vrew/YouTubeã«å³ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ã§ã™
```

## ğŸ›ï¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ»ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ãƒ¢ãƒ‡ãƒ«é¸æŠ
```bash
--model medium      # é«˜é€Ÿãƒ»æ¨™æº–å“è³ª
--model large-v3    # é«˜å“è³ªãƒ»ä½é€Ÿï¼ˆæ¨å¥¨ï¼‰
--model small       # è¶…é«˜é€Ÿãƒ»ç°¡æ˜“å“è³ª
```

### ãƒ‡ãƒã‚¤ã‚¹é¸æŠ
```bash
--device auto       # è‡ªå‹•åˆ¤åˆ¥ï¼ˆæ¨å¥¨ï¼‰
--device cpu        # CPUå¼·åˆ¶
--device cuda       # GPUä½¿ç”¨ï¼ˆé«˜é€Ÿï¼‰
```

### æœ«å°¾èª¿æ•´
```bash
--offset-ms 20      # éŸ³å£°æœ«å°¾-20msï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
--offset-ms 10      # ã‚ˆã‚ŠçŸ­ã
--offset-ms 40      # ã‚ˆã‚Šé•·ã
```

## ğŸ”§ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ»éƒ¨åˆ†å‡¦ç†

### æ—¢å­˜SRTã®æœ«å°¾èª¿æ•´ã®ã¿

```bash
python3 scripts/pad_to_audio_end.py \
  --in subs/existing.srt \
  --audio audio/test.wav \
  --out subs/adjusted.srt \
  --offset-ms 20

python3 srt_to_vtt.py \
  --in subs/adjusted.srt \
  --out subs/adjusted.vtt
```

### é‡è¤‡å‰Šé™¤ã®ã¿

```bash
python3 scripts/clean_tail.py \
  --in subs/messy.srt \
  --out subs/clean.srt \
  --final-anchor "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ"
```

## ğŸ“Š å“è³ªåŸºæº–

### åˆæ ¼æ¡ä»¶
- **åŒæœŸç²¾åº¦**: Â±0.05sä»¥å†…ï¼ˆå®Ÿç¸¾: Â±0.02sï¼‰
- **å­—å¹•æ•°**: é©åˆ‡ãªæ–‡ç¯€åˆ†å‰²
- **æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: UTF-8
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: CapCut/Vrew/YouTube å³ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯

### å“è³ªç¢ºèªã‚³ãƒãƒ³ãƒ‰
```bash
python3 scripts/check_durations.py \
  --audio audio/test.wav \
  --srt subs/test_final.srt
```

## ğŸ—‚ï¸ ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

### æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```
audio/2025-08-09_dementia_tips.wav     # æ—¥ä»˜_ãƒˆãƒ”ãƒƒã‚¯
script_2025-08-09.txt                  # script_æ—¥ä»˜
subs/2025-08-09_final.{srt,vtt}       # æ—¥ä»˜_final
```

### ãƒ¡ãƒªãƒƒãƒˆ
- æ™‚ç³»åˆ—ã‚½ãƒ¼ãƒˆå¯èƒ½
- æ¤œç´¢ã—ã‚„ã™ã„
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ™‚ã«æ•´ç†ã—ã‚„ã™ã„

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œ

ã‚ˆãã‚ã‚‹å•é¡Œã¯ `TROUBLESHOOTING.md` ã‚’å‚ç…§

### å³å¯¾å¿œå¯èƒ½ãªå•é¡Œ
- å‡¦ç†ãŒé…ã„ â†’ `--model medium`
- åŒæœŸãŒãšã‚Œã‚‹ â†’ `--offset-ms` èª¿æ•´  
- æ–‡å­—åŒ–ã‘ â†’ UTF-8ç¢ºèª
- GPUé–¢é€£ã‚¨ãƒ©ãƒ¼ â†’ `--device cpu`

### Claude Codeå•ã„åˆã‚ã›æ™‚
ç’°å¢ƒæƒ…å ±ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ä½¿ç”¨ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚»ãƒƒãƒˆã§æä¾›

## ğŸ“ˆ å‡¦ç†æ™‚é–“ç›®å®‰

| éŸ³å£°é•· | ãƒ¢ãƒ‡ãƒ« | ãƒ‡ãƒã‚¤ã‚¹ | å‡¦ç†æ™‚é–“ |
|--------|--------|----------|----------|
| 5åˆ† | medium | CPU | 5-10åˆ† |
| 5åˆ† | large-v3 | CPU | 15-25åˆ† |
| 5åˆ† | large-v3 | GPU | 3-5åˆ† |
| 10åˆ† | medium | CPU | 10-20åˆ† |

## ğŸ‰ å®Œäº†ç¢ºèª

æˆåŠŸæ™‚ã®å‡ºåŠ›ä¾‹:
```
ğŸ‰ å­—å¹•ç”Ÿæˆå®Œäº†
ğŸ“„ SRT: subs/2025-08-09_final.srt (15854 bytes)
ğŸ¬ VTT: subs/2025-08-09_final.vtt (14379 bytes)
ğŸ”¢ å­—å¹•æ•°: 159
âœ… CapCut/Vrew/YouTubeã«å³ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ã§ã™
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

- **ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹**: `CLAUDE_CODE_TEMPLATE.md`
- **ãƒˆãƒ©ãƒ–ãƒ«è§£æ±º**: `TROUBLESHOOTING.md`
- **æŠ€è¡“ç›¸è«‡**: Claude Codeï¼ˆç’°å¢ƒæƒ…å ±ä»˜ãã§ï¼‰

**å®Ÿé‹ç”¨æº–å‚™å®Œäº† - æ¯å›åŒã˜ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§é«˜å“è³ªå­—å¹•ç”Ÿæˆï¼**